<%- include('../../partials/header') %>
<%- include('../../partials/navbar') %>

<main class="container py-5" style="max-width: 700px;">
  <h2>Editar locação</h2>

  <% if (error) { %>
    <div class="alert alert-danger mt-3"><%= error %></div>
  <% } %>

  <form method="POST" action="/locacoes/<%= locacao.id %>" class="mt-3">

    <div class="mb-3">
      <label class="form-label">Cliente</label>
      <select name="cliente_id" class="form-select" required>
        <% clientes.forEach(c => { %>
          <option value="<%= c.id %>" <%= c.id === locacao.cliente_id ? 'selected' : '' %>>
            <%= c.nome %>
          </option>
        <% }) %>
      </select>
    </div>

    <div class="mb-3">
      <label class="form-label">Veículo</label>
      <select name="veiculo_id" class="form-select" required>
        <% veiculos.forEach(v => { %>
          <option value="<%= v.id %>" <%= v.id === locacao.veiculo_id ? 'selected' : '' %>>
            <%= v.marca %> <%= v.modelo %> - <%= v.placa %>
          </option>
        <% }) %>
      </select>
    </div>

    <div class="mb-3">
      <label>Data início</label>
      <input type="date" name="data_inicio" value="<%= locacao.data_inicio.toISOString().split('T')[0] %>" class="form-control" required>
    </div>

    <div class="mb-3">
      <label>Data fim</label>
      <input type="date" name="data_fim" value="<%= locacao.data_fim.toISOString().split('T')[0] %>" class="form-control" required>
    </div>

    <button class="btn btn-primary">Atualizar</button>
    <a href="/locacoes" class="btn btn-secondary ms-2">Cancelar</a>
  </form>
</main>

<%- include('../../partials/footer') %>